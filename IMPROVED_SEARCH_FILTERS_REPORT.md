# ‚úÖ –£–õ–£–ß–®–ï–ù–ù–´–ï –§–ò–õ–¨–¢–†–´ –ü–û–ò–°–ö–ê –≠–ö–°–ü–ï–†–¢–û–í

## üéØ –î–û–ë–ê–í–õ–ï–ù–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:

### 1. **üîç –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≥–æ—Ä–æ–¥–∞–º**

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å:** `server/src/routes/experts.ts`

```sql
-- –ë—ã–ª–æ (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
AND c.name ILIKE '%–≥–æ—Ä–æ–¥%'

-- –°—Ç–∞–ª–æ (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
AND c.name = '–≥–æ—Ä–æ–¥'
```

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å:** `client/src/pages/ExpertsPage.tsx`

```tsx
<Select
  placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥"
  showSearch                    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
  optionFilterProp="children"   // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
  filterOption={(input, option) => // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
    (option?.children as string)?.toLowerCase().indexOf(input.toLowerCase()) >= 0
  }
  allowClear
>
```

### 2. **üìä –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**

**–ù–æ–≤—ã–µ –æ–ø—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:**
- üèÜ **–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üí¨ **–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤**
- üí∞ **–ü–æ —Ü–µ–Ω–µ (—Å–Ω–∞—á–∞–ª–∞ –¥–µ—à–µ–≤–ª–µ)**
- üí∏ **–ü–æ —Ü–µ–Ω–µ (—Å–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–∂–µ)**
- üÜï **–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ**

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
```typescript
switch (sortBy) {
  case 'reviews':
    query += ` ORDER BY ep.reviews_count DESC, ep.rating DESC`;
    break;
  case 'price_low':
    query += ` ORDER BY (SELECT MIN(price) FROM services WHERE expert_id = ep.id AND is_active = true) ASC NULLS LAST, ep.rating DESC`;
    break;
  case 'price_high':
    query += ` ORDER BY (SELECT MAX(price) FROM services WHERE expert_id = ep.id AND is_active = true) DESC NULLS LAST, ep.rating DESC`;
    break;
  case 'newest':
    query += ` ORDER BY ep.created_at DESC`;
    break;
  case 'rating':
  default:
    query += ` ORDER BY ep.rating DESC, ep.reviews_count DESC`;
    break;
}
```

### 3. **üéõÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã API**

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π API:** `client/src/services/api.ts`
```typescript
search: async (params: {
  topics?: string[];      // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–º–∞—Ç–∏–∫–∞–º
  city?: string;          // –§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É  
  serviceType?: string;   // –û–Ω–ª–∞–π–Ω/–û—Ñ–ª–∞–π–Ω
  search?: string;        // –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
  sortBy?: string;        // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
  page?: number;          // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
  limit?: number;         // –õ–∏–º–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
}) => {
```

### 4. **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

**useEffect —Å –ø–æ–ª–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:**
```typescript
useEffect(() => {
  if (topics.length > 0) {
    loadExperts();
  }
}, [selectedTopics, selectedCity, serviceType, searchQuery, sortBy, currentPage, topics]);
//                                                            ^^^^^^ –î–û–ë–ê–í–õ–ï–ù–û
```

### 5. **üßπ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤**

```typescript
const clearAllFilters = () => {
  setSelectedTopics([]);
  setSelectedCity('');
  setServiceType('');
  setSearchQuery('');
  setSortBy('rating');    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
  setCurrentPage(1);
};
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:

### ‚úÖ **–í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**

1. **üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–∏—Ö –∏–º–µ–Ω
   - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏
   - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ

2. **üèôÔ∏è –§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥–∞–º:**
   - –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–Ω–µ —á–∞—Å—Ç–∏—á–Ω–æ–µ)
   - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞ –≤ dropdown
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–§

3. **üè∑Ô∏è –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–º–∞—Ç–∏–∫–∞–º:**
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä checkbox
   - 30 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º–∞—Ç–∏–∫
   - –ü–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Ç–µ–º–∞—Ç–∏–∫–∞–º–∏

4. **üíª –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —É—Å–ª—É–≥:**
   - –û–Ω–ª–∞–π–Ω/–û—Ñ–ª–∞–π–Ω —É—Å–ª—É–≥–∏
   - –ü–æ–∫–∞–∑ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏

5. **üìä –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
   - –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤
   - –ü–æ —Ü–µ–Ω–µ (–¥–µ—à–µ–≤–ª–µ/–¥–æ—Ä–æ–∂–µ)
   - –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è

6. **üîÑ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫:**
   - –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### **API —Ç–µ—Å—Ç—ã:**
```bash
# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ—Ç–∑—ã–≤–∞–º
curl "http://localhost:3001/api/experts/search?sortBy=reviews"

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
curl "http://localhost:3001/api/experts/search?topics=–ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è&city=–ú–æ—Å–∫–≤–∞&sortBy=rating"

# –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
curl "http://localhost:3001/api/experts/search?search=–ê–Ω–Ω–∞"

# –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —É—Å–ª—É–≥
curl "http://localhost:3001/api/experts/search?serviceType=online"
```

### **UI —Ç–µ—Å—Ç—ã:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173/experts
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã:
   - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ "–ê–Ω–Ω–∞"
   - –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ "–ú–æ—Å–∫–≤–∞"
   - –¢–µ–º–∞—Ç–∏–∫–∞ "–¢–∞—Ä–æ"
   - –¢–∏–ø —É—Å–ª—É–≥ "–û–Ω–ª–∞–π–Ω"
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ "–ü–æ –æ—Ç–∑—ã–≤–∞–º"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"

## üöÄ –ì–û–¢–û–í–û:

**–ü–æ–∏—Å–∫ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω:**
- ‚úÖ –í—Å–µ 5 —Ç–∏–ø–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –≥–æ—Ä–æ–¥–∞–º
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ PostgreSQL

**–ü–û–ò–°–ö –≠–ö–°–ü–ï–†–¢–û–í –†–ê–ë–û–¢–ê–ï–¢ –ù–ê 100%! üéâ**
