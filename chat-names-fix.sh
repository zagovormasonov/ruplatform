#!/bin/bash

echo "üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ò–ú–ï–ù –í –ß–ê–¢–ï..."

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}üîÑ –û–±–Ω–æ–≤–ª—è–µ–º frontend –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω...${NC}"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞
cd /home/node/ruplatform/client

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -d "." ]; then
    echo -e "${RED}‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è client –Ω–µ –Ω–∞–π–¥–µ–Ω–∞${NC}"
    exit 1
fi

# –°–æ–±–∏—Ä–∞–µ–º frontend
echo -e "${BLUE}üî® –°–æ–±–∏—Ä–∞–µ–º frontend...${NC}"
npm run build

if [ $? -eq 0 ]; then
    echo -e "${GREEN}‚úÖ Frontend —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ frontend${NC}"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
if [ -f "dist/index.html" ]; then
    echo -e "${GREEN}‚úÖ dist/index.html —Å–æ–∑–¥–∞–Ω${NC}"
else
    echo -e "${RED}‚ùå dist/index.html –ù–ï —Å–æ–∑–¥–∞–Ω${NC}"
    exit 1
fi

echo ""
echo -e "${GREEN}üéâ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í –ß–ê–¢–ï –ü–†–ò–ú–ï–ù–ï–ù–´!${NC}"
echo ""
echo -e "${YELLOW}üîÑ –¢–µ–ø–µ—Ä—å –≤ —á–∞—Ç–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:${NC}"
echo "   ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤ –≤ —Å–∞–π–¥–±–∞—Ä–µ"
echo "   ‚úÖ –ü–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —á–∞—Ç–∞"
echo "   ‚úÖ –ò–º–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö"
echo "   ‚úÖ Fallback –∏–º–µ–Ω–∞ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç"
echo ""
echo -e "${YELLOW}üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:${NC}"
echo "   1. –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –ø—É—Å—Ç—ã—Ö –∏–º–µ–Ω: 'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID'"
echo "   2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Socket.IO —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
echo "   3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
echo "   4. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null/undefined –∑–Ω–∞—á–µ–Ω–∏—è"
echo ""
echo -e "${GREEN}üöÄ Frontend –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!${NC}"
